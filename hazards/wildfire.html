<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
     <title>Wildfires</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" /> 
    <link rel="stylesheet" href="js/jquery-ui.css">
    <link rel="stylesheet" href="css/jquery-ui-slider-pips.css" />
    <link rel="stylesheet" href="css/hazard_map_style.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">
    <link rel="stylesheet" href="css/perfect-scrollbar.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
              
    <link rel="shortcut icon" href="img/pnw.ico" type="image/x-icon"> 
    
    <meta property="og:title" content="Atlas of the Pacific Northwest: Wildfires" />
    <meta property="og:url" content="https://rawgit.com/osulp/PNWatlas/master/hazards/wildfire.html" />
    <meta property="og:description" content="Wildfire maps of the Pacific Northwest."/>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script type="text/javascript" src="../js/clickFunction.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/jquery-ui-slider-pips.js"</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/8.5.1/nouislider.min.js"></script>
	<script src="js/perfect-scrollbar.js"></script>

</head>
<body>
		<!--<button id="collapse" onclick="collapse()">
			<i class="fa fa-chevron-left" id ="collapse-arrow" aria-hidden="true"></i>
		</button>-->
		<div id="infoPanel">
			<div id="top">
				<h1>Wildfires</h1>
				<img src="img/fire_icon.png" id="titleImageCircle" style="display:inline-block;">
				<div id="buttons">
					<div class="dropdown">
						<button class="dropbtn"><b id="dataType">Select Class</b><p id="arrow">&#9660;</p></button>
						<div class="dropdown-content">
							 <button type="button" id="but1" class="selection" style="background:rgba(242, 242, 242, 0.8);">Modern Fires</button>
							 <button type="button" id="but2" class="selection">Historical Fires</button>
							 <button type="button" id="but3" class="selection">Wildfire Risk</button>
					   </div>
					</div>
				</div>
			</div>
			<div id="attribution">
				<div id="text" style="text-align:left;">
					<div id="leg_1" style="display:unset;">
						<h2 id="title" style="display:block; width:280px; white-space:normal;">Modern Wildfires</h2><img src="img/tree.png" id="iconImage" style="right:20px; margin-top:-10px;">
						<div style="height:32px;"><b id="leg1_block" style="background:#e62e00; border:black 2px solid;"></b><p>&nbsp</p><p id="leg1" style="margin-left:5px;">Wildfire</p></div><br/>
						<div style="height:30px;"><b id="leg2_block" style="background:#aed0bf; border-left:black 2px solid; border-right:black 2px solid;border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">Public Land</p></div>
						<div style="height:32px;"><b id="leg3_block" style="background:#bfbfbf; border-left:black 2px solid; border-right:black 2px solid;border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">Urban Area</p></div>
						<br/>
						<p id="description" style="font-weight:bold; text-align:justify; white-space:normal; padding-left:0px; width:280px; display:block; position:relative;">Wildfire area data are collected via processed satellite imagery.</p>
						<br/>	
					</div>	
					<div id="leg_2" style="display:none;">
						<h2 id="title" style="display:block; width:280px; white-space:normal;">Historical Wildfires</h2><img src="img/tree.png" id="iconImage" style="right:20px; margin-top:-10px;">
						<div style="height:32px;"><b id="leg1_block" style="background:#e62e00; border:black 2px solid;"></b><p>&nbsp</p><p id="leg1" style="margin-left:5px;">Wildfire</p></div><br/>
						<div style="height:30px;"><b id="leg2_block" style="background:#aed0bf; border-left:black 2px solid; border-right:black 2px solid;border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">Public Land</p></div>
						<div style="height:32px;"><b id="leg3_block" style="background:#bfbfbf; border-left:black 2px solid; border-right:black 2px solid;border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">Urban Area</p></div>
						<br/>
						<p id="description" style="font-weight:bold; text-align:justify; white-space:normal; padding-left:0px; width:280px; display:block; position:relative;">Historical wildfire data are collected via satellite, paper map, and reconstruction.</p>
						<p id="description" style="font-weight:normal; font-style:italic; text-align:justify; white-space:normal; padding-left:0px; width:280px; display:block; position:relative;">These data are subject to limited geographic availability, and are not comprehensive.</p>
					</div>	
					<div id="leg_3" style="display:none;">
						<h2 id="title" style="display:block; width:280px; white-space:normal;">Wildfire Risk</h2><img src="img/tree.png" id="iconImage" style="right:20px;">
						<div style="height:32px;"><b id="leg1_block" style="background:#e3350c; border-left:black 2px solid; border-right:black 2px solid; border-top:black 2px solid;"></b><p>&nbsp</p><p id="leg1" style="margin-left:5px;">Very High</p></div>
						<div style="height:30px;"><b id="leg2_block" style="background:#d16f49; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">High</p></div>
						<div style="height:30px;"><b id="leg3_block" style="background:#bc9e81; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">Moderate</p></div>
						<div style="height:30px;"><b id="leg4_block" style="background:#9dcc9b; border-left:black 2px solid; border-right:black 2px solid;"></b><p>&nbsp</p><p id="leg2" style="margin-left:5px;">Low</p></div>
						<div style="height:32px;"><b id="leg6_block" style="background:#7dbf7d; border-left:black 2px solid; border-right:black 2px solid; border-bottom:black 2px solid;"></b><p>&nbsp</p><p id="leg3" style="margin-left:5px;">Very Low</p></div>
						<br/>
						<p id="description" style="font-weight:bold; text-align:justify; white-space:normal; padding-left:0px; width:280px; display:block; position:relative;">Wildfire hazard potential modeled from the USFS Large Fire Simulation system, vegetation data, and observed fire locations. Assessment from 2014.</p>
					</div>
					</br>
					<p3 id="facts" style="line-height:20px;"><p3 style="font-weight:bold">Five Largest PNW Wildfires:</p3><br/><br/>&#9900 <p3 style="font-weight:bold">Big Burn</p3> (ID, WA, MT, 1910): 945,374 Acres<br/><br/>&#9900 <p3 style="font-weight:bold">Wilderness Complex</p3> (ID, 2000): 681,701 Acres<br/><br/>&#9900 <p3 style="font-weight:bold">Murphy Complex</p3> (ID, NV, 2007): 610,823 Acres<br/><br/>&#9900 <p3 style="font-weight:bold">Long Draw</p3> (OR, 2012): 582,284 Acres<br/><br/>&#9900 <p3 style="font-weight:bold">Biscuit Complex</p3> (OR, 2002): 500,020 Acres</p3>		
				</div>
			
				<div id="pageChange">
					<a href="#sources" id="arrow" style="display:inline-block;">
						<i class="fa fa-info-circle" aria-hidden="true" style="padding-left:90px;"></i>
					</a>
					<a href="#link_popup" id="arrow" style="display:inline-block;">
						<i class="fa fa-home" aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="#share" class="share" id="arrow" style="display:inline-block;">
						<i class="fa fa-share-alt " aria-hidden="true" style="padding-left:0;"></i>
					</a>
				</div>
			</div>
			<div id="slider-vertical-modern" style="height:340px; font-size:20px; width:10px; position:absolute; left:320px; z-index:2000; top:25%; border-radius: 0px 3px 3px 0px;background:rgba(255,255,255,0.6);border-top: 10px solid rgba(255,255,255,0);border-bottom: 10px solid rgba(255,255,255,0);"></div>
			<div id="slider-vertical-historical" style="display:none; height:340px; font-size:20px; width:10px; position:absolute; left:320px; z-index:2000; top:25%; border-radius: 0px 3px 3px 0px;background:rgba(255,255,255,0.6);border-top: 10px solid rgba(255,255,255,0);border-bottom: 10px solid rgba(255,255,255,0);"></div>
		</div>
		
    	<div id="map" style="width: 100%; height: 100%;"></div>
    	
    	<div id="sources" class="overlay">
			<div class="popup">
				<h2 style="display:inline; font-size:32px;">Sources</h2>
				<a class="close" href="#" style="display:inline;">×</a>
				<hr>
				<div class="content">
					<p2 style="font-size:20px">Geographic Data</p2><br><br/>
                    <div class="source">
                    	<b><p2>Modern Wildfires by Year: <a href = "https://rmgsc.cr.usgs.gov/outgoing/GeoMAC/historic_fire_data/" target="_blank">USGS GeoMAC</a></p2></b><br>
                    		<p3>Notes: [year]_perimiters_dd83 files were downloaded for each year. Used in Modern Fires layer.</p3>
                    </div>
                     <div class="source">
                    	<b><p2>BLM OR/WA Historical Wildfires: <a href = "https://www.blm.gov/or/gis/data-details.php?id=463" target="_blank">United States Bureau of Land Management</a></p2></b><br>
                    		<p3>Notes: Used in Historical Fires layer. Only includes fires of over 10 acres.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Historic Idaho Fire Perimeters: <a href = "https://data.doi.gov/dataset/historic-fire-perimeters-bureau-of-land-management-idaho" target="_blank">United States Bureau of Land Management</a></p2></b><br>
                    		<p3>Notes: Doesn't include national forest land. Used in Historical Fires layer.</p3>
                    </div>
                    <div class="source">
                    	<b><p2>Idaho Panhandle Historic Wildfires: <a href = "https://www.fs.usda.gov/main/ipnf/landmanagement/gis#fire" target="_blank">United States Forest Service: Idaho Panhandle National Forest</a></p2></b><br>
                    		<p3>Notes: Used in Historical Fires layer.</p3>
                    </div>
                     <div class="source">
                    	<b><p2>Fire History Polygons for Region 1: <a href = "https://www.fs.usda.gov/detailfull/r1/landmanagement/gis/?cid=stelprd3804172&width=full" target="_blank">United States Forest Service: Northern Region</a></p2></b><br>
                    		<p3>Notes: Used in Historical Fires layer.</p3>
                    </div>
                     <div class="source">
                    	<b><p2>Ochoco National Forest Fire History: <a href = "https://www.fs.fed.us/r6/data-library/gis/ochoco/index.shtml" target="_blank">United States Forest Service: Ochoco National Forest</a></p2></b><br>
                    		<p3>Notes: Used in Historical Fires layer.</p3>
                    </div>
                     <div class="source">
                    	<b><p2>Wildfire Risk <a href = "https://www.fs.usda.gov/rds/archive/Product/RDS-2015-0046" target="_blank">United States Forest Service</a></p2></b><br>
                    </div>
                </div>
				<hr>
				<p2 style="float:right; font-size:12px;">Map created with Leaflet.</p2>
				<br/>
				<a class="close2" href="#" style="display:inline;">Close</a>
			</div>
		</div>
		
		<div id="link_popup" class="link_overlay">
			<div class="link_popup">
				<a class="close" href="#" style="display:inline;">×</a>
				<div class="content">
					<a href="hazard_index.html" style="font-weight:bold; text-decoration:none;">Hazards Home</a>
					<hr>
					<a href="vulnerability.html" style="text-decoration:underline;">Disaster Risk</a>
					<a href="earthquake.html" style="text-decoration:underline;">Earthquakes</a>
					<a href="flood.html" style="text-decoration:underline;">Flooding</a>
					<a href="volcano.html" style="text-decoration:underline;">Volcanos</a>
					<a href="drought.html" style="text-decoration:underline;">Drought</a>
					<a href="weather.html" style="text-decoration:underline;">Extreme Weather</a>
					<a href="wildfire.html" style="text-decoration:underline;">Wildfires</a>
					<hr>
					<a href="../index.html" style="font-weight:bold; text-decoration:none;">Atlas Home</a>
				</div>
			</div>
		</div>

		<div id="share" class="share_overlay">
			<div class="share_popup">
				<a id="clear" href="#" style="display:none;">×</a>
				<div class="content">
					<a href="https://facebook.com/sharer.php?u=https://rawgit.com/osulp/PNWatlas/master/hazards/wildfire.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-facebook-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="https://twitter.com/home?status=PNW%20Wildfires%0Ahttp%3A//rawgit.com/osulp/PNWatlas/master/hazards/wildfire.html" id="arrow" style="display:inline-block;">
						<i class="fa fa-twitter-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
					<a href="" id="arrow" style="display:inline-block;">
						<i class="fa fa-linkedin-square " aria-hidden="true" style="padding-left:0;"></i>
					</a>
				</div>
			</div>
		</div>
<script>
//////////////base functions (these never change)///////////////////////
	//////////////function for the info panel collapse button///////////////////////
	var collapsed = false;
    function collapse(){
    	if (collapsed == false){
    		document.getElementById("infoPanel").style.transition = "display 2s";
    		document.getElementById("infoPanel").style.display = "none";
    		document.getElementById("collapse").style.left = '0px';
    		document.getElementById("collapse").style.paddingLeft = '2px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-right";
    		collapsed = true;
    	} else{
    		document.getElementById("infoPanel").style.display = "unset";
    		document.getElementById("collapse").style.left = '320px';
    		document.getElementById("collapse").style.paddingLeft = '0px';
    		document.getElementById("collapse-arrow").className = "fa fa-chevron-left";
    		collapsed = false;
    	}
    	
    }
//////////////function that allows topojson layers to be loaded///////////////////////
    L.TopoJSON = L.GeoJSON.extend({  
  		addData: function(jsonData) {    
    		if (jsonData.type === 'Topology') {
      			for (key in jsonData.objects) {
       			 geojson = topojson.feature(jsonData, jsonData.objects[key]);
       			 L.GeoJSON.prototype.addData.call(this, geojson);
      		}
    	}    
    	else {
      		L.GeoJSON.prototype.addData.call(this, jsonData);
    		}
  		}  
	});
//////////////Initialize map///////////////////////	
	var map = L.map('map', {center: [45.56, -119.75], zoom: 7, zoomControl:false});
///////////////////////make zoom level correspond to browser size////////////////////////////////
	window.addEventListener('load', function(event){
    	var width = document.documentElement.clientWidth;
    	if (width < 1500 && width > 800) {
        	map.setView(new L.LatLng(45.56, -121.75), 6); 
    		}  else if (width > 1501) {
        	map.setZoom(7);
        	} else {
        	map.setZoom(5);
        	}
	});
////////////////////////////////basemap layers////////////////////////////////
	var Esri_WorldTerrain = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
		maxZoom:10,
		minZoom:5,
		opacity:1
	}).addTo(map);

	var pnwCover = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_outline2_black',
        format: 'image/png',
		maxZoom:10,
		minZoom:5,
		opacity:0.3,
		transparent:true,
	}).addTo(map);

	var label = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_only_labels/{z}/{x}/{y}@2x.png', {
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
		subdomains: 'abcd',
		maxZoom:10,
		minZoom:5,
		tileSize:256,
		bounds:[
			new L.LatLng(49.56,-125.25),
			new L.LatLng(40.5,-111.5)
		],
		pane:'labels'
	});	
	
	var backgroundParks = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:parks_total',
        format: 'image/png',
		maxZoom:10,
		minZoom:4,
		opacity:0.8,
		transparent:true
	}).addTo(map);
	
	var urbanAreas = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:pnw_urban_areas',
        format: 'image/png',
		maxZoom:10,
		minZoom:4,
		opacity:0.8,
		transparent:true
	}).addTo(map);
	
    var pnwStates = $.getJSON("assets/pnw_states.geojson", function(data){
        pnwStates = L.geoJson(data, {
        	style:function pnwStatesStyle(){
				return{
					opacity: 1,
					color:'#666666',
					fillOpacity:0	,
					fillColor:'#404040',
					weight:1
				};
			},
        	interactive: false
        }).addTo(map);
    });
    
     var pnwCounties = $.getJSON("assets/pnw_counties.geojson", function(data){
        pnwCounties = L.geoJson(data, {
        	style:function pnwCountiesStyle(){
				return{
					opacity: 1,
					color:'#bfbfbf',
					fillOpacity:0	,
					fillColor:'#404040',
					weight:0.5
				};
			},	
        	interactive: false
        }).addTo(map);
    });
	
	map.createPane('labels');
	map.getPane('labels').style.pointerEvents = 'none';
	map.getPane('labels').style.zIndex = 650;
	label.addTo(map);
	
	map.createPane('tooltip');
	map.getPane('tooltip').style.zIndex = 700;
////////////////////////////////important variables////////////////////////////////	
	var data = 2017;//this variable is the listener for whenever a new dataset is selected	

	var info = L.control();

	info.onAdd = function (map) {
    	this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    	this.update();
    	return this._div;
	};
	
	info.update = function () {
   		this._div.innerHTML = (
        	'<h2>Hover over map</h2>'
        	);
		};

	info.addTo(map);
////////////////////////////display Layers////////////////////////////////////
	////////////////////////////modern fires////////////////////////////////////
    var modernFires;
    
    function addModernFires(){
    modernFires = null;
    modernFires = new L.TopoJSON(null, {
  		filter: function(feature, layer) {
  			return feature.properties.year == data ? true:
  				false;
  			},
  		onEachFeature: function(feature, featureLayer){
  			featureLayer.bindTooltip('<h3 style="display:inline;">' + feature.properties.firename + '</h3><br/><p style="display:inline;">' + feature.properties.acres.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0}) + '&nbspAcres<br/>' + feature.properties.c_date + '</p>', {className: 'label_tooltip',pane:'tooltip'});
  			}
		});

	$.getJSON('assets/wildfires_modern.json')
  		.done(addModernData);

	function addModernData(topoData) {  
  		modernFires.addData(topoData);
  		modernFires.addTo(map);
  		modernFires.eachLayer(handleModernLayer);
	}
	
	function handleModernLayer(layer){
        layer.setStyle({
          		color:'#ffffff',
        		weight:1,
        		opacity: 0,
				fillOpacity:0.7,
				fillColor:'#e62e00'
        });
        layer.on({
         	mouseover : enterModernLayer,
            mouseout: leaveModernLayer
        });
    }
    
    function enterModernLayer(){
		this.setStyle({
        	fillOpacity: 1,
        	opacity: 1,
        	dashArray: 4
      	});
    }
    
    function leaveModernLayer(){
      	this.setStyle({
        	fillOpacity: 0.7,
        	opacity: 0,
        	dashArray: 0
     	 });
    }

    }
    addModernFires();

    //modern fires slider
    $( function() {
    $( "#slider-vertical-modern" ).slider({
      	orientation:"vertical",
      	range: "min",
      	min: 2000,
      	max: 2017,
      	value: data,
      	slide: function( event, ui ) {
        	$( "#amount" ).val( ui.value );
        		data = ui.value;
        		if (modernFires){
        			modernFires.remove(map);
        		}
    			addModernFires();
      		},
      	change: function( event, ui ) {
        	$( "#amount" ).val( ui.value );
        		data = ui.value;
        		if (modernFires){
        			modernFires.remove(map);
        		}
    			addModernFires();
      		}
    	}).slider("pips",{
    		rest: "label",
    	});
  	});
  	
	////////////////////////////historical fires////////////////////////////////////
	
	var historicalFires;
    
    function addHistoricalFires(){
    historicalFires = null;
    historicalFires = new L.TopoJSON(null, {
  		filter: function(feature, layer) {
  			return feature.properties.decade == data ? true:
  				false;
  			},
  		onEachFeature: function(feature, featureLayer){
  			featureLayer.bindTooltip('<h3 style="display:inline;">' + feature.properties.firename + '</h3><br/><p style="display:inline;">' + feature.properties.acres.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0}) + '&nbspAcres<br/>' + feature.properties.date + '</p>', {className: 'label_tooltip', pane:'tooltip'});
  		}
	});
		

	$.getJSON('assets/wildfires_historical.json')
  		.done(addHistoricData);

	function addHistoricData(topoData) {  
  		historicalFires.addData(topoData);
  		historicalFires.addTo(map);
  		historicalFires.eachLayer(handleHistoricLayer);
	}
	
	function handleHistoricLayer(layer){
        layer.setStyle({
          		color:'#ffffff',
        		weight:1,
        		opacity: 0,
				fillOpacity:0.7,
				fillColor:'#e62e00'
        });
        layer.on({
         	mouseover : enterHistoricLayer,
            mouseout: leaveHistoricLayer
        });
    }
    
    function enterHistoricLayer(){

		this.setStyle({
        	fillOpacity: 1,
        	opacity: 1,
        	dashArray: 4
      	});
      //info.update(this.feature.properties);
    }
    
    function leaveHistoricLayer(){
      
      	this.setStyle({
        	fillOpacity: 0.7,
        	opacity: 0,
        	dashArray: 0
     	 });
      //info.update();
    }
    
    }
    //addHistoricalFires();
    
    //historical fires slider
    $( function() {
    $( "#slider-vertical-historical" ).slider({
      	orientation:"vertical",
      	range: "min",
      	min: 1890,
      	max: 1990,
      	value: data,
      	slide: function( event, ui ) {
        	$( "#amount" ).val( ui.value );
        		data = ui.value;
        		if (historicalFires){
        			historicalFires.remove(map);
        		}
    			addHistoricalFires();
      		},
      	change: function( event, ui ) {
        	$( "#amount" ).val( ui.value );
        		data = ui.value;
        		if (historicalFires){
        			historicalFires.remove(map);
        		}
    			addHistoricalFires();
      		}
    	}).slider("pips",{
    		rest: "label",
    		suffix: "s",
    		step: 10
    	});
  	});
  	////////////////////////////fire risk////////////////////////////////////
  	var fireRisk = L.tileLayer.wms('http://mapious.ceoas.oregonstate.edu/geoserver/baldricg_PNW_ATLAS/wms', {
		layers: 'baldricg_PNW_ATLAS:fire_risk',
        format: 'image/png',
		maxZoom:10,
		minZoom:4,
		opacity:0.7,
		transparent:true
	});
	
///////////////////////////////button function////////////////////////////////			
	//this function uses the ClickFunction plugin to easily add/remove layers, change legends, styling and anything else when a new dataset is selected from the dropdown buttons  		
	var buttonLabels = ['#but1','#but2','#but3'];

	var buttonFunctions = {
		but1: {button:'but1', 
				newLayers:[backgroundParks], 
				newLegend: 'leg_1',  
				title:'Modern', 
				newElements:['slider-vertical-modern'], 
				variable:2017, 
				layerFunction:function(){
					$("#slider-vertical-modern").slider('value',data); 
					if(historicalFires)
						{
							map.removeLayer(historicalFires);
						}
					}
				},
		but2: {button:'but2', 
				newLayers:[backgroundParks], 
				newLegend: 'leg_2', 
				title:'Historical', 
				newElements:['slider-vertical-historical'], 
				variable:1990, 
				layerFunction:function(){
					$("#slider-vertical-historical").slider('value',data); 
					if(modernFires)
						{
							map.removeLayer(modernFires);
						}
					}
				},
		but3: {button:'but3', 
			newLayers:[fireRisk], 
			newLegend: 'leg_3', 
			title:'Risk', 
			layerFunction:function(){
					if(modernFires)
						{
							map.removeLayer(modernFires);
						}
					if(historicalFires)
						{
							map.removeLayer(historicalFires);
						}
					}
				}	
	};
	
	$('.function').clickFunction({
		buttonFunctions: buttonFunctions,
		buttonLabels: buttonLabels,
		selected:buttonFunctions.but1
	});
     
///////////////////////////////other miscellaneous functions (these also never change)////////////////////////////////   

   	//add zoom control
    new L.Control.Zoom({ position: 'topright' }).addTo(map);
    
    //remove leaflet attribution
	document.getElementsByClassName("leaflet-control-attribution")[0].style.visibility = "hidden";
	
	//add scrolling capabilities to text box
    var container = document.getElementById('text');
		Ps.initialize(container);
	
	//update text box to be correct size
	var minHeight = 50; // Define a minimum height for the middle div

	function resizeMiddle() {
    var h = $('body').height() - $('#top').height() - 65;
    		h = h > minHeight ? h : minHeight;
   	 	$('#attribution').height(h);
	}
	
	function resizePopup() {
   		var h = $('.popup').height() - 90;
    		h = h > minHeight ? h : minHeight;
   	 	$('.popup .content').height(h);
	}
	$(document).ready(resizePopup);
	$(window).resize(resizePopup);

	$(document).ready(resizeMiddle);
	$(window).resize(resizeMiddle);
	
    //remove standard leaflet attribution
    
   	$(document).click(function(event) {
		if (!$(event.target).closest(".share_overlay,.share").length) {
			$('#clear')[0].click();
		}
	});


</script>

</body>
</html>
